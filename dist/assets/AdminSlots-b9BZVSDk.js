import{j as f,Y as k,w,o as e,q as i,B as p,A as C,x as M,X as q,$ as F,D as r,a0 as A,a1 as E,a2 as D}from"./index-BctlDaup.js";import{u as g}from"./useMutation-BDj03tzs.js";import{P,a as z,T as Q}from"./trash-2-MntCMlwY.js";const K=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function B(){const[y,n]=f.useState(!1),[l,d]=f.useState(null),[s,t]=f.useState({day:"Monday",startTime:"18:00",endTime:"22:00",maxTables:10,available:!0}),o=k(),{data:h=[],isLoading:j}=w({queryKey:["timeSlots"],queryFn:D}),c=g({mutationFn:F,onSuccess:()=>{o.invalidateQueries({queryKey:["timeSlots"]}),r.success("Time slot added successfully"),n(!1),u()},onError:()=>{r.error("Failed to add time slot")}}),m=g({mutationFn:({id:a,updates:b})=>A(a,b),onSuccess:()=>{o.invalidateQueries({queryKey:["timeSlots"]}),r.success("Time slot updated successfully"),d(null),u()},onError:()=>{r.error("Failed to update time slot")}}),v=g({mutationFn:E,onSuccess:()=>{o.invalidateQueries({queryKey:["timeSlots"]}),r.success("Time slot deleted successfully")},onError:()=>{r.error("Failed to delete time slot")}}),u=()=>{t({day:"Monday",startTime:"18:00",endTime:"22:00",maxTables:10,available:!0})},N=a=>{a.preventDefault(),l?m.mutate({id:l.id,updates:s}):c.mutate(s)},T=a=>{d(a),t({day:a.day,startTime:a.startTime,endTime:a.endTime,maxTables:a.maxTables,available:a.available})},S=a=>{confirm("Are you sure you want to delete this time slot?")&&v.mutate(a)},x=()=>{n(!1),d(null),u()};return j?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{children:[e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-serif text-3xl font-bold text-foreground mb-2",children:"Time Slots"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage available reservation time slots"})]}),e.jsxs(p,{onClick:()=>n(!0),children:[e.jsx(P,{size:18,className:"mr-2"}),"Add Slot"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((a,b)=>e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.05,duration:.5},children:e.jsx(C,{depth:6,children:e.jsx("div",{className:`bg-gradient-card rounded-xl border border-border/50 overflow-hidden ${a.available?"":"opacity-60"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:e.jsx(M,{size:24,className:"text-primary"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>T(a),className:"p-2 rounded-lg bg-muted text-foreground hover:bg-muted/80",children:e.jsx(z,{size:16})}),e.jsx(i.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>S(a.id),className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20",children:e.jsx(Q,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-serif text-lg font-bold text-foreground",children:a.day}),e.jsxs("p",{className:"text-muted-foreground",children:[a.startTime," - ",a.endTime]}),e.jsxs("p",{className:"text-sm text-primary",children:["Max ",a.maxTables," tables"]}),e.jsx("div",{className:"flex items-center justify-between pt-2",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a.available?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:a.available?"Available":"Unavailable"})})]})]})})})},a.id))}),(y||l)&&e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:x,children:e.jsxs(i.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-background rounded-2xl border border-border p-6 max-w-md w-full mx-4",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"font-serif text-2xl font-bold text-foreground",children:l?"Edit Time Slot":"Add Time Slot"}),e.jsx("button",{onClick:x,className:"p-2 rounded-lg hover:bg-muted transition-colors",children:e.jsx(q,{size:20})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Day of Week"}),e.jsx("select",{value:s.day,onChange:a=>t({...s,day:a.target.value}),className:"w-full px-4 py-3 rounded-xl bg-input border border-border text-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0,children:K.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Start Time"}),e.jsx("input",{type:"time",value:s.startTime,onChange:a=>t({...s,startTime:a.target.value}),className:"w-full px-4 py-3 rounded-xl bg-input border border-border text-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"End Time"}),e.jsx("input",{type:"time",value:s.endTime,onChange:a=>t({...s,endTime:a.target.value}),className:"w-full px-4 py-3 rounded-xl bg-input border border-border text-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Max Tables"}),e.jsx("input",{type:"number",min:"1",max:"50",value:s.maxTables,onChange:a=>t({...s,maxTables:parseInt(a.target.value)}),className:"w-full px-4 py-3 rounded-xl bg-input border border-border text-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"available",checked:s.available,onChange:a=>t({...s,available:a.target.checked}),className:"w-4 h-4 rounded border-border"}),e.jsx("label",{htmlFor:"available",className:"text-sm font-medium text-foreground",children:"Available for booking"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(p,{type:"button",variant:"ghost",onClick:x,className:"flex-1",children:"Cancel"}),e.jsx(p,{type:"submit",disabled:c.isPending||m.isPending,className:"flex-1",children:c.isPending||m.isPending?"Saving...":l?"Update":"Add Slot"})]})]})]})})]})}export{B as default};
