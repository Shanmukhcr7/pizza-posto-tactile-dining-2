import{c as I,w as j,C as g,U as A,o as e,q as o,A as r,L as n,x as C,H as c,F as m,G as x,I as y,J as u,V as v,W as L}from"./index-BctlDaup.js";import{g as U}from"./menuService-ByZ0yT_C.js";import{U as b}from"./utensils-crossed-CZbht_qZ.js";import{G as M}from"./gift-nHld5k3z.js";import{U as T}from"./user-BSZ3wGdp.js";const q=I("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),P=async()=>{try{const t=new Date().toISOString().split("T")[0],l=c(m(x,"reservations"),y("date","==",t)),h=(await u(l)).size,i=new Date;i.setDate(i.getDate()-7);const s=c(m(x,"reservations"),y("date",">=",i.toISOString().split("T")[0])),f=(await u(s)).size,N=(await U()).length,w=c(m(x,"reservations"),v(100)),p=await u(w),k=p.docs.reduce((S,z)=>{const D=z.data();return S+(D.guests||0)},0),R=p.size>0?(k/p.size).toFixed(1):"0";return{todayReservations:h,menuItems:N,weekReservations:f,avgPartySize:parseFloat(R)}}catch(t){return console.error("Error fetching dashboard stats:",t),{todayReservations:0,menuItems:0,weekReservations:0,avgPartySize:0}}},Q=async()=>{try{const t=c(m(x,"reservations"),L("date","desc"),v(5));return(await u(t)).docs.map(d=>({id:d.id,...d.data()}))}catch(t){return console.error("Error fetching recent reservations:",t),[]}};function H(){const{data:t,isLoading:l}=j({queryKey:["dashboardStats"],queryFn:P,refetchInterval:3e4}),{data:d=[],isLoading:h}=j({queryKey:["recentReservations"],queryFn:Q,refetchInterval:3e4}),i=t?[{label:"Today's Reservations",value:t.todayReservations.toString(),icon:g,trend:"Live data"},{label:"Menu Items",value:t.menuItems.toString(),icon:b,trend:"Total active items"},{label:"This Week",value:t.weekReservations.toString(),icon:q,trend:"Reservations this week"},{label:"Avg. Party Size",value:t.avgPartySize.toString(),icon:A,trend:"Average guests per booking"}]:[];return e.jsxs("div",{children:[e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"font-serif text-3xl font-bold text-foreground mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Welcome back! Here's what's happening today."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:l?Array.from({length:4}).map((s,a)=>e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1,duration:.5},children:e.jsx(r,{depth:6,children:e.jsx("div",{className:"bg-gradient-card rounded-xl p-6 border border-border/50",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"w-12 h-12 bg-muted rounded-lg mb-4"}),e.jsx("div",{className:"h-8 bg-muted rounded mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded"})]})})})},a)):i.map((s,a)=>e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1,duration:.5},children:e.jsx(r,{depth:6,children:e.jsxs("div",{className:"bg-gradient-card rounded-xl p-6 border border-border/50",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(s.icon,{size:20,className:"text-primary"})})}),e.jsx("p",{className:"text-3xl font-bold text-foreground mb-1",children:s.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.label}),e.jsx("p",{className:"text-xs text-primary mt-2",children:s.trend})]})})},s.label))}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"mb-8",children:[e.jsx("h2",{className:"font-serif text-2xl font-bold text-foreground mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx(n,{to:"/admin/reservations",children:e.jsx(r,{depth:6,children:e.jsx("div",{className:"bg-gradient-card rounded-xl p-6 border border-border/50 hover:bg-muted/30 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:e.jsx(g,{size:24,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Manage Bookings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View & manage reservations"})]})]})})})}),e.jsx(n,{to:"/admin/menu",children:e.jsx(r,{depth:6,children:e.jsx("div",{className:"bg-gradient-card rounded-xl p-6 border border-border/50 hover:bg-muted/30 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:e.jsx(b,{size:24,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Menu Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add & edit menu items"})]})]})})})}),e.jsx(n,{to:"/admin/slots",children:e.jsx(r,{depth:6,children:e.jsx("div",{className:"bg-gradient-card rounded-xl p-6 border border-border/50 hover:bg-muted/30 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:e.jsx(C,{size:24,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Available Slots"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure time slots"})]})]})})})}),e.jsx(n,{to:"/admin/vouchers",children:e.jsx(r,{depth:6,children:e.jsx("div",{className:"bg-gradient-card rounded-xl p-6 border border-border/50 hover:bg-muted/30 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:e.jsx(M,{size:24,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Voucher System"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage discount codes"})]})]})})})}),e.jsx(n,{to:"/admin/users",children:e.jsx(r,{depth:6,children:e.jsx("div",{className:"bg-gradient-card rounded-xl p-6 border border-border/50 hover:bg-muted/30 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:e.jsx(T,{size:24,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"User Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage user roles"})]})]})})})})]})]}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"font-serif text-2xl font-bold text-foreground",children:"Recent Reservations"}),e.jsx(n,{to:"/admin/reservations",children:e.jsx("button",{className:"px-4 py-2 rounded-lg bg-muted text-foreground hover:bg-muted/80 transition-colors text-sm font-medium",children:"View All"})})]}),e.jsx(r,{depth:6,children:e.jsx("div",{className:"bg-gradient-card rounded-xl border border-border/50 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Guest"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Party Size"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:h?Array.from({length:5}).map((s,a)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-muted rounded w-24"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-muted rounded w-20"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-muted rounded w-16"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-muted rounded w-20"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-6 bg-muted rounded-full w-16"})})]},a)):d.length>0?d.map(s=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-foreground",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:new Date(s.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:s.time}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:[s.guests," guests"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.status==="confirmed"?"bg-green-500/10 text-green-500":s.status==="cancelled"?"bg-red-500/10 text-red-500":"bg-yellow-500/10 text-yellow-500"}`,children:s.status||"pending"})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(g,{size:24,className:"text-muted-foreground/50"}),e.jsx("p",{children:"No reservations yet"}),e.jsx("p",{className:"text-sm",children:"Recent bookings will appear here"})]})})})})]})})})})]})]})}export{H as default};
