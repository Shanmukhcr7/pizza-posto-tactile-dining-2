import{Y as F,w as A,j as m,o as e,q as c,B as u,a3 as E,A as y,X as j,D as n}from"./index-BctlDaup.js";import{u as f}from"./useMutation-BDj03tzs.js";import{a as D,u as k,d as q,g as P}from"./menuService-ByZ0yT_C.js";import{P as Q,a as U,T as K}from"./trash-2-MntCMlwY.js";import{S as b}from"./save-BYvT8ID_.js";const v=["Classic","Signature","Vegetarian","Desserts"];function X(){const i=F(),{data:g=[],isLoading:h,error:a}=A({queryKey:["adminMenuItems"],queryFn:P}),o=f({mutationFn:D,onSuccess:()=>{i.invalidateQueries({queryKey:["adminMenuItems"]}),n.success("Menu item added")},onError:()=>{n.error("Failed to add menu item")}}),t=f({mutationFn:({id:s,item:l})=>k(s,l),onSuccess:()=>{i.invalidateQueries({queryKey:["adminMenuItems"]}),n.success("Menu item updated")},onError:()=>{n.error("Failed to update menu item")}}),N=f({mutationFn:q,onSuccess:()=>{i.invalidateQueries({queryKey:["adminMenuItems"]}),n.success("Menu item deleted")},onError:()=>{n.error("Failed to delete menu item")}}),[C,p]=m.useState(null),[w,x]=m.useState(!1),[r,d]=m.useState({name:"",description:"",price:"0",category:"Classic",imageUrl:"/src/assets/pizza-margherita.jpg"}),M=s=>{p(s)},z=(s,l)=>{t.mutate({id:s,item:l}),p(null)},I=s=>{window.confirm("Are you sure you want to delete this menu item?")&&N.mutate(s)},S=()=>{if(!r.name||!r.description||!r.price){n.error("Please fill all fields");return}o.mutate({name:r.name,description:r.description,price:r.price,category:r.category||"Classic",imageUrl:r.imageUrl||"/src/assets/pizza-margherita.jpg"}),d({name:"",description:"",price:"0",category:"Classic",imageUrl:"/src/assets/pizza-margherita.jpg"}),x(!1)};return e.jsxs("div",{children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-serif text-3xl font-bold text-foreground mb-2",children:"Menu Items"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your restaurant's menu"})]}),e.jsxs(u,{onClick:()=>x(!0),children:[e.jsx(Q,{size:18,className:"mr-2"}),"Add Item"]})]}),e.jsx(E,{children:w&&e.jsx(c.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6",children:e.jsx(y,{depth:6,children:e.jsxs("div",{className:"bg-gradient-card rounded-xl border border-border/50 p-6",children:[e.jsx("h3",{className:"font-serif text-xl font-bold mb-4",children:"Add New Menu Item"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Name",value:r.name,onChange:s=>d({...r,name:s.target.value}),className:"px-4 py-2 rounded-xl bg-input border border-border text-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("input",{type:"text",placeholder:"Description",value:r.description,onChange:s=>d({...r,description:s.target.value}),className:"px-4 py-2 rounded-xl bg-input border border-border text-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("input",{type:"text",placeholder:"Price (e.g., 14.99)",value:r.price||"",onChange:s=>d({...r,price:s.target.value}),className:"px-4 py-2 rounded-xl bg-input border border-border text-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("select",{value:r.category,onChange:s=>d({...r,category:s.target.value}),className:"px-4 py-2 rounded-xl bg-input border border-border text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:v.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs(u,{onClick:S,size:"sm",children:[e.jsx(b,{size:16,className:"mr-2"}),"Save"]}),e.jsxs(u,{variant:"ghost",onClick:()=>x(!1),size:"sm",children:[e.jsx(j,{size:16,className:"mr-2"}),"Cancel"]})]})]})})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((s,l)=>e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.05,duration:.5},children:e.jsx(y,{depth:6,children:e.jsxs("div",{className:"bg-gradient-card rounded-xl border border-border/50 overflow-hidden",children:[e.jsx("div",{className:"relative h-40",children:e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"p-4",children:C===s.id?e.jsx(T,{item:s,onSave:z,onCancel:()=>p(null)}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-serif text-lg font-bold text-foreground",children:s.name}),e.jsx("span",{className:"text-xs text-primary",children:s.category})]}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:["â‚¬",s.price]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:s.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>M(s.id),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-muted text-foreground hover:bg-muted/80",children:[e.jsx(U,{size:16}),"Edit"]}),e.jsx(c.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>I(s.id),className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20",children:e.jsx(K,{size:16})})]})]})})]})})},s.id))})]})}function T({item:i,onSave:g,onCancel:h}){const[a,o]=m.useState(i);return e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:a.name,onChange:t=>o({...a,name:t.target.value}),className:"w-full px-3 py-2 rounded-lg bg-input border border-border text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("input",{type:"text",value:a.description,onChange:t=>o({...a,description:t.target.value}),className:"w-full px-3 py-2 rounded-lg bg-input border border-border text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a.price,onChange:t=>o({...a,price:t.target.value}),className:"w-20 px-3 py-2 rounded-lg bg-input border border-border text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("select",{value:a.category,onChange:t=>o({...a,category:t.target.value}),className:"flex-1 px-3 py-2 rounded-lg bg-input border border-border text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:v.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{onClick:()=>g(i.id,a),size:"sm",className:"flex-1",children:[e.jsx(b,{size:14,className:"mr-1"}),"Save"]}),e.jsx(u,{variant:"ghost",onClick:h,size:"sm",children:e.jsx(j,{size:14})})]})]})}export{X as default};
