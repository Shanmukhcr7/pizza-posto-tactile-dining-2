import{c as f,E as p,t as j,w as y,o as e,q as x,A as o,B as m,C as u,M as N,F as v,G as k,H as w,I as C,J as A}from"./index-BctlDaup.js";const B=f("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function q(){const{user:t}=p(),r=j(),{data:i=[],isLoading:l,error:c}=y({queryKey:["myReservations",t?.uid],queryFn:async()=>{if(!t?.uid)return[];console.log("Fetching reservations for user:",t.uid);const s=v(k,"reservations"),n=w(s,C("userId","==",t.uid)),d=(await A(n)).docs.map(a=>({id:a.id,...a.data()}));return d.sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime()),console.log("Found reservations:",d),d},enabled:!!t?.uid}),g=s=>{switch(s){case"confirmed":return"bg-green-500/10 text-green-500 border-green-500/20";case"cancelled":return"bg-red-500/10 text-red-500 border-red-500/20";default:return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20"}},h=s=>{switch(s){case"confirmed":return"✓";case"cancelled":return"✕";default:return"⏳"}};return t?e.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-serif text-4xl font-bold text-foreground mb-2",children:"My Bookings"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"View and manage your table reservations"})]}),e.jsxs("button",{onClick:()=>r("/book"),className:"px-4 py-2 rounded-lg bg-muted text-foreground hover:bg-muted/80 transition-colors flex items-center gap-2",children:[e.jsx(B,{size:18}),"Make New Booking"]})]}),l&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your bookings..."})]})}),c&&e.jsx(o,{depth:6,children:e.jsxs("div",{className:"bg-gradient-card rounded-xl border border-border/50 p-8 text-center",children:[e.jsx("p",{className:"text-red-500 mb-4",children:"Failed to load your bookings"}),e.jsx(m,{onClick:()=>window.location.reload(),children:"Try Again"})]})}),!l&&!c&&e.jsx("div",{className:"space-y-6",children:i.length>0?i.map((s,n)=>e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,duration:.5},children:e.jsx(o,{depth:6,children:e.jsx("div",{className:"bg-gradient-card rounded-xl border border-border/50 p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:e.jsx(u,{size:24,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-serif text-xl font-bold text-foreground",children:new Date(s.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsxs("p",{className:"text-muted-foreground",children:["at ",s.time," • ",s.guests," guests"]})]})]}),e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium border ${g(s.status)}`,children:[e.jsx("span",{children:h(s.status)}),s.status.charAt(0).toUpperCase()+s.status.slice(1)]}),s.notes&&e.jsx("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(N,{size:16,className:"text-muted-foreground mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.notes})]})})]}),e.jsxs("div",{className:"flex gap-3",children:[s.status==="pending"&&e.jsx("button",{className:"px-3 py-1 rounded-lg bg-muted text-foreground hover:bg-muted/80 transition-colors text-sm",children:"Modify"}),s.status==="confirmed"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-500 text-sm font-medium mb-1",children:"Confirmed"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"See you soon!"})]}),s.status==="cancelled"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-sm font-medium mb-1",children:"Cancelled"}),e.jsx("button",{onClick:()=>r("/book"),className:"px-3 py-1 rounded-lg bg-muted text-foreground hover:bg-muted/80 transition-colors text-sm",children:"Book Again"})]})]})]})})})},s.id)):e.jsx(o,{depth:6,children:e.jsxs("div",{className:"bg-gradient-card rounded-xl border border-border/50 p-12 text-center",children:[e.jsx(u,{size:48,className:"text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"font-serif text-xl font-bold text-foreground mb-2",children:"No Bookings Yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"You haven't made any reservations yet. Would you like to book a table?"}),e.jsx(m,{onClick:()=>r("/book"),children:"Make Your First Booking"})]})})})]})}):(r("/book"),null)}export{q as default};
